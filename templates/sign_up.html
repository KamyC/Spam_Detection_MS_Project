<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Tweet Spam Detection</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="../static/css/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/structure-style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sign.css') }}">
  <script>
    $(function(){
        $("#password_confirm").blur(function(){
            if($("#password_input").val()!=$("#password_confirm").val()){
                $("#remind").html("password should match")
            }
            else{
                $("#remind").html(" ")
            }
        })
        $("#submitBtn").click(function(event){
            if (!$('#user_name').val() || !$('#email_input').val()){
                event.preventDefault()
            }
            if($("#password_input").val()!=$("#password_confirm").val()){
                event.preventDefault()
            }
        })
        $("#user_name").blur(function (){
            let username = $("#user_name").val()
            $.ajax({
              type: 'POST',
              dataType: 'text',
              url: '/check_username',
              data: {username: username},
              traditional: true,
              success: function (data) {
                if(data=="valid" && username){
                    $("#user_remind").html("valid username")
                    $("#user_remind").css({"text-align": "right","color":"green","font-size":"13px"})
                    $("#submitBtn").attr("disabled", false)
                }
                else{
                    $("#user_remind").html("invalid username")
                    $("#user_remind").css({"text-align": "right","color":"red","font-size":"13px"})
                    $("#submitBtn").attr("disabled", true)
                }
              }
        });
        })
        $("#email_input").blur(function (){
            let email = $("#email_input").val()
            $.ajax({
              type: 'POST',
              dataType: 'text',
              url: '/check_email',
              data: {email: email},
              traditional: true,
              success: function (data) {
                if(data=="valid" && email){
                    $("#email_remind").html("unused email")
                    $("#email_remind").css({"text-align": "right","color":"green","font-size":"13px"})
                    $("#submitBtn").attr("disabled", false)
                }
                else if(data=="invalid"){
                    $("#email_remind").html("repeated email")
                    $("#email_remind").css({"text-align": "right","color":"red","font-size":"13px"})
                    $("#submitBtn").attr("disabled", true)
                }
              }
        });
        })
    })
  </script>
</head>
<body>
  <div class="row banner">
    <div class="title col-4"><a href="{{ url_for('home')}}">Spam Tweet Detector</a></div>
    <div class="col-5 tags">
      <div class="tag-item"><a href="{{ url_for('toWhyPage')}}">Introduction</a></div>
      <div class="tag-item"><a href="{{ url_for('toServicePage')}}">Service API</a></div>
      <div class="tag-item"><a href="{{ url_for('toSupportPage')}}">Technical Support</a> </div>
      <div class="tag-item"><a href="{{ url_for('toDashBoard')}}">My Dashboard</a></div>
    </div>
    <div class="col-2 sign">
      <p class="sign-up"><a href="{{ url_for('toSignIn')}}">Sign in</a></p>
      <p class="sign-up"><a href="{{ url_for('toSignUp')}}">Sign up</a></p>
    </div>
  </div>
  <div class="main">
      <div class="card container">
        <p class="create-title">Create An Account</p>
        <form action="{{ url_for('hasSignedUp')}}" method="POST" class="input" id="sign_form">
          <div class="form-group">
            <label>User name</label>
            <input type="user" class="form-control" id="user_name" aria-describedby="userHelp" name="userName">
            <p id="user_remind"></p>
          </div>
          <div class="form-group">
            <label>Email address</label>
            <input type="email" class="form-control" id="email_input" aria-describedby="emailHelp" name="emailInput">
            <p id="email_remind"></p>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" id="password_input" name="pswInput">
          </div>
          <div class="form-group">
            <label>Password Confirm</label>
            <input type="password" class="form-control" id="password_confirm" name="pswConfirm">
            <p id="remind"></p>
          </div>

          <div class="submit-button">
            <button type="submit" class="btn btn-primary" id="submitBtn" >Submit</button>
          </div>

        </form>
      </div>
    </div>
  <div class="img-container footer">
      <div class="row contacts">
          <div class="col">
              <p class="subtitle">Contact</p>
              <p>Email: xxxxxx@sfsu.edu</p>
              <p>Telephone: (xxx) xxx-xxxx</p>
          </div>
          <div class="col">
              <p class="subtitle">Location</p>
              <p>1600 Holloway Avenue, SCI 163</p>
              <p>San Francisco, CA 94132</p>
          </div>
          <div class="col">
              <p class="subtitle">Technical Support</p>
              <p>Monday - Thursday 9 a.m. - 5 p.m.</p>
              <p>Friday 9 a.m. - 4 p.m.</p>
          </div>
          <div class="col">
              <p class="subtitle">Quick Links</p>
              <p>xxxxxxx</p>
              <p>xxxxx @ SF State</p>
          </div>
      </div>
  </div>
</body>
</html>
